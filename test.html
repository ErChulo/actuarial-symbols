<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actuarial Symbols Test</title>
    <script src="actuarial-symbols.refactored.js"></script>
    <style>
        body { font-family: sans-serif; line-height: 1.8; max-width: 800px; margin: 2rem auto; }
        h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; }
        code { background-color: #f4f4f4; padding: 2px 5px; border-radius: 3px; }
        .test-case { margin-bottom: 2rem; }
        .formula {
            text-align: center; 
            font-size: 1.2em; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            gap: 0.5em;
        }
    </style>
</head>
<body>

    <h1>Testing the Refactored Actuarial Symbols Library</h1>

    <div class="test-case">
        <h2>Annuities (<code>&lt;act-annuity&gt;</code>)</h2>
        <p>
            Immediate annuity for a life aged x: <act-annuity age="x"></act-annuity> (<code>&lt;act-annuity age="x"&gt;</code>)
        </p>
        <p>
            Annuity-due: <act-annuity age="x" type="due"></act-annuity> (<code>type="due"</code>)
        </p>
        <p>
            Continuous annuity: <act-annuity age="x" type="continuous"></act-annuity> (<code>type="continuous"</code>)
        </p>
        <p>
            Deferred annuity (n years, life aged x, term m): <act-annuity age="x:m" defer="n"></act-annuity> (<code>age="x:m" defer="n"</code>)
        </p>
        <p>
            Monthly annuity: <act-annuity age="x" frequency="(12)"></act-annuity> (<code>frequency="(12)"</code>)
        </p>
        <p>
            Joint-life annuity: <act-annuity age="xy" type="due"></act-annuity> (<code>age="xy"</code>)
        </p>
    </div>

    <div class="test-case">
        <h2>Insurances (<code>&lt;act-insurance&gt;</code>)</h2>
        <p>
            Whole life insurance (end of year): <act-insurance age="x"></act-insurance> (<code>&lt;act-insurance age="x"&gt;</code>)
        </p>
        <p>
            Continuous whole life insurance: <act-insurance age="x" payment="continuous"></act-insurance> (<code>payment="continuous"</code>)
        </p>
        <p>
            Term insurance: <act-insurance age="x:n" type="term"></act-insurance> (<code>age="x:n" type="term"</code>)
        </p>
        <p>
            Pure endowment: <act-insurance age="x" term="n" type="pure-endowment"></act-insurance> (<code>age="x" term="n" type="pure-endowment"</code>)
        </p>
    </div>

    <div class="test-case">
        <h2>Premiums and Reserves</h2>
        <p>
            Annual premium for whole life: <act-premium benefit="A" age="x"></act-premium>
        </p>
        <p>
            Continuous premium: <act-premium benefit="A" age="x" payment="continuous"></act-premium>
        </p>
        <p>
            Reserve at duration k: <act-reserve benefit="A" age="x" duration="k"></act-reserve>
        </p>
    </div>

    <div class="test-case">
        <h2>Probabilities and Commutation Functions</h2>
        <p>
            Survival probability (1 year): <act-prob age="x" time=""></act-prob> (Note: empty time defaults to 1, LaTeX p_x)
        </p>
        <p>
            Mortality probability (t years): <act-prob age="x" time="t" type="mortality"></act-prob>
        </p>
        <p>
            Commutation function D_x: <act-commute func="D" age="x"></act-commute>
        </p>
         <p>
            Commutation function N_x: <act-commute func="N" age="x"></act-commute>
        </p>
    </div>

    <div class="test-case">
        <h2>Equivalence Principle Discussion</h2>
        <p>
            The equivalence principle states that the present value of premiums must equal the present value of benefits. For a whole life insurance of 1 on a life aged <i>x</i>, the net single premium is <act-insurance age="x"></act-insurance>. If this is funded by level annual premiums, the premium is <act-premium benefit="A" age="x"></act-premium>.
        </p>
        <p>The relationship is:</p>
        <div class="formula">
            <act-premium benefit="A" age="x"></act-premium> 
            <math><mo>&times;</mo></math>
            <act-annuity age="x" type="due"></act-annuity> 
            <math><mo>=</mo></math>
            <act-insurance age="x"></act-insurance>
        </div>
        <p>From this, we can derive the formula for the annual premium:</p>
        <div class="formula">
            <act-premium benefit="A" age="x"></act-premium> 
            <math><mo>=</mo></math>
            <math>
                <mfrac>
                    <mrow><act-insurance age="x"></act-insurance></mrow>
                    <mrow><act-annuity age="x" type="due"></act-annuity></mrow>
                </mfrac>
            </math>
        </div>
    </div>

</body>
</html>
